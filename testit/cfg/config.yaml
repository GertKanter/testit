###############################################
#                                             #
#          Configuration template             #
#                                             #
#  PLEASE LOOK AT THE TUTORIALS FOR EXAMPLES  #
#                                             #
###############################################

configuration:
  dataDirectory: "$(rospack find testit)/data/" # Where to store coverage files, bag files etc.
  bringupSUT: "" # how to bring up a pipeline server/docker SUT (general case), you can use "[[]]" for replacing
  bringupSUTDelay: 1 # duration to wait after command (seconds)
  bringupSUTTimeout: 0 # in seconds (0 for no timeout, but you have to specify bringupSUTFinishTrigger then or tests will not be run because it will be blocking. If bringupSUTFinishTrigger is "-" then this timeout is ignored)
  bringupSUTFinishTrigger: "-" # polling command to test whether startup is finished, "-" = no trigger
  runSUT: "" # run SUT, look at the tutorials for examples
  runSUTDelay: 10 # duration to wait for SUT to come up (roscore initialization)
  runSUTTimeout: 0
  runSUTFinishTrigger: "-"
  stopSUT: "" # how to stop SUT, look at the tutorials for examples
  stopSUTDelay: 5 # duration to wait after stopping the SUT
  stopSUTTimeout: 0
  stopSUTFinishTrigger: "-"
  teardownSUT: "" # how to clean up after finishing (shut down server/docker) (general case)
  teardownSUTDelay: 0 # duration to wait after teardown
  teardownSUTTimeout: 5
  teardownSUTFinishTrigger: "-"
  bringupTestIt: "" # bring up the pipeline server (in the cloud for example)
  bringupTestItDelay: 1 # duration to wait after command
  bringupTestItTimeout: 0
  bringupTestItFinishTrigger: "-"
  runTestIt: "" # how to bring up a pipeline TestIt (general case), you can use "[[]]" for replacing 
  runTestItDelay: 5 # duration to wait after command
  runTestItTimeout: 0
  runTestItFinishTrigger: "-"
  stopTestIt: "" # general case pipeline stopping
  stopTestItDelay: 5 # duration to wait after command
  stopTestItTimeout: 0
  stopTestItFinishTrigger: "-"
  teardownTestIt: ""
  teardownTestItDelay: 1 # duration to wait after command
  teardownTestItTimeout: 0 # empty string = use default
  teardownTestItFinishTrigger: "-" # command to test whether startup is finished, "-" = no trigger
  bagEnabled: False # set to True, if you want to bag data
  bagDuration: 30 # seconds, "rosbag record" file duration for test failure analysis
  bagMaxSplits: 2 # number of bags to keep in rotation (total rosbag duration for post-failure analysis = bagMaxSplits * bagDuration)

pipelines:
  - tag: "Example pipeline" # identifier for reporting
    testItRosVersion: "lunar"
    sutConnection: "-" # (e.g., "user@pipe1.domain.com"). "-" means no command (ssh, scp) wrapping, execute docker and other commands on localhost. Note that bringup/teardown are not wrapped. Run/stop + test commands are wrapped
    testItConnection: "-" # see above
    masterHost: "" # master hostname, look at the tutorials for examples
    testItHost: "" # testit hostname, look at the tutorials for examples
    masterIP: "-" # where SUT roscore is running (used if masterHost is not defined) ("-" means none)
    testItIP: "-" # where TestIt docker container is running (used if testitHost is not defined) ("-" means none)
    testItVolume: "" # where TestIt volume is located (test scenarios + bags are stored there) at the [[testItConnection]] host.
    sharedDirectory: "" # shared volume for TestIt docker container (shared files with host, e.g. "/testit/")
    # + all the [bringup,run,stop,teardown][SUT,TestIt] in 'configuration' section

tests:
  - tag: "scenario tag" # identifier for reporting
    pipeline: "" # leave empty for any
    verbose: False # if set to True, TestIt daemon logs some additional info
    uppaalModel: "" # {uppaal} define the Uppaal TA model (used for TestIt Uppaal functionality), w.r.t testit_tests directory (e.g., "fixtures/01/model.xml"), check tutorials for an example
    resultsDirectory: "" # where to store results inside TestIt docker w.r.t sharedDirectory (i.e., sharedDirectory="/testit/" and resultsDirectory="testit_tests/results/" => results will be stored in "/testit/testit_tests/results")
    launch: "" # how to execute this test (run command) in TestIt container
    oracle: "" #  determining whether pass/fail, if empty = "launch" execution result will be used to determine pass/fail
    timeout: 0 # time in seconds for timeout (0 for no timeout)
    timeoutVerdict: False # if timeout occurs, declare the test as this
